{"ast":null,"code":"export function saveTokenWithExpToCookie(token) {\n  try {\n    // Раскодируем JWT без проверки\n    const base64Payload = token.split('.')[1];\n    const payload = JSON.parse(atob(base64Payload)); // Декодирование Base64\n\n    // Извлекаем `exp` из payload\n    const expTimeInSeconds = payload.exp;\n    const currentTimeInSeconds = Math.floor(Date.now() / 1000);\n    const maxAge = expTimeInSeconds - currentTimeInSeconds;\n    console.log('Токен распарсенный:', payload);\n    if (maxAge > 0) {\n      // Сохраняем токен в cookie с рассчитанным временем жизни\n      document.cookie = `jwt=${token}; path=/; Secure; SameSite=Strict; max-age=${maxAge}`;\n    } else {\n      console.error(\"Срок действия токена истек, невозможно сохранить в cookie.\");\n    }\n  } catch (error) {\n    console.error(\"Ошибка при обработке JWT токена:\", error);\n  }\n}\nexport function getTokenFromCookie() {\n  try {\n    const cookies = document.cookie.split('; ');\n    const jwtCookie = cookies.find(row => row.startsWith('jwt='));\n    return jwtCookie ? jwtCookie.split('=')[1] : null;\n  } catch (error) {\n    console.log('Ошибка взяти ');\n    return null;\n  }\n}\nexport function decodeToken(token) {\n  try {\n    // Раскодируем JWT без проверки\n    const base64Payload = token.split('.')[1];\n    const decodedPayload = JSON.parse(atob(base64Payload)); // Декодирование Base64\n    return decodedPayload;\n  } catch (err) {\n    console.error('Ошибка при декодировании токена:', err);\n    return null;\n  }\n}","map":{"version":3,"names":["saveTokenWithExpToCookie","token","base64Payload","split","payload","JSON","parse","atob","expTimeInSeconds","exp","currentTimeInSeconds","Math","floor","Date","now","maxAge","console","log","document","cookie","error","getTokenFromCookie","cookies","jwtCookie","find","row","startsWith","decodeToken","decodedPayload","err"],"sources":["D:/учеба/3 курс/1 семестр/ИнфоБез/pracitce_3/practice_3_ui/src/JWTProvider.js"],"sourcesContent":["export function saveTokenWithExpToCookie(token) {\r\n    try {\r\n        // Раскодируем JWT без проверки\r\n        const base64Payload = token.split('.')[1];\r\n        const payload = JSON.parse(atob(base64Payload)); // Декодирование Base64\r\n\r\n        // Извлекаем `exp` из payload\r\n        const expTimeInSeconds = payload.exp;\r\n        const currentTimeInSeconds = Math.floor(Date.now() / 1000);\r\n        const maxAge = expTimeInSeconds - currentTimeInSeconds;\r\n\r\n        console.log('Токен распарсенный:', payload);\r\n\r\n        if (maxAge > 0) {\r\n            // Сохраняем токен в cookie с рассчитанным временем жизни\r\n            document.cookie = `jwt=${token}; path=/; Secure; SameSite=Strict; max-age=${maxAge}`;\r\n        } else {\r\n            console.error(\"Срок действия токена истек, невозможно сохранить в cookie.\");\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Ошибка при обработке JWT токена:\", error);\r\n    }\r\n}\r\n\r\nexport function getTokenFromCookie() {\r\n    try {\r\n        const cookies = document.cookie.split('; ');\r\n        const jwtCookie = cookies.find(row => row.startsWith('jwt='));\r\n        return jwtCookie ? jwtCookie.split('=')[1] : null;\r\n    }\r\n    catch (error) {\r\n        console.log('Ошибка взяти ')\r\n        return null\r\n    }\r\n    \r\n}\r\n\r\nexport function decodeToken(token) {\r\n    try {\r\n        // Раскодируем JWT без проверки\r\n        const base64Payload = token.split('.')[1];\r\n        const decodedPayload = JSON.parse(atob(base64Payload)); // Декодирование Base64\r\n        return decodedPayload;\r\n    } catch (err) {\r\n        console.error('Ошибка при декодировании токена:', err);\r\n        return null;\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAAO,SAASA,wBAAwBA,CAACC,KAAK,EAAE;EAC5C,IAAI;IACA;IACA,MAAMC,aAAa,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACzC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAAC,CAAC,CAAC;;IAEjD;IACA,MAAMM,gBAAgB,GAAGJ,OAAO,CAACK,GAAG;IACpC,MAAMC,oBAAoB,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;IAC1D,MAAMC,MAAM,GAAGP,gBAAgB,GAAGE,oBAAoB;IAEtDM,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEb,OAAO,CAAC;IAE3C,IAAIW,MAAM,GAAG,CAAC,EAAE;MACZ;MACAG,QAAQ,CAACC,MAAM,GAAG,OAAOlB,KAAK,8CAA8Cc,MAAM,EAAE;IACxF,CAAC,MAAM;MACHC,OAAO,CAACI,KAAK,CAAC,4DAA4D,CAAC;IAC/E;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZJ,OAAO,CAACI,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;EAC5D;AACJ;AAEA,OAAO,SAASC,kBAAkBA,CAAA,EAAG;EACjC,IAAI;IACA,MAAMC,OAAO,GAAGJ,QAAQ,CAACC,MAAM,CAAChB,KAAK,CAAC,IAAI,CAAC;IAC3C,MAAMoB,SAAS,GAAGD,OAAO,CAACE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,UAAU,CAAC,MAAM,CAAC,CAAC;IAC7D,OAAOH,SAAS,GAAGA,SAAS,CAACpB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;EACrD,CAAC,CACD,OAAOiB,KAAK,EAAE;IACVJ,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5B,OAAO,IAAI;EACf;AAEJ;AAEA,OAAO,SAASU,WAAWA,CAAC1B,KAAK,EAAE;EAC/B,IAAI;IACA;IACA,MAAMC,aAAa,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACzC,MAAMyB,cAAc,GAAGvB,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAAC,CAAC,CAAC;IACxD,OAAO0B,cAAc;EACzB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACVb,OAAO,CAACI,KAAK,CAAC,kCAAkC,EAAES,GAAG,CAAC;IACtD,OAAO,IAAI;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}