{"ast":null,"code":"import { decodeToken } from \"../JWTProvider\";\nimport { encryptMessage, decryptMessage } from \"../cryptoTools\";\nexport async function requestUpdateNote(data, sharedKey) {\n  const encryptedMessage = encryptMessage(sharedKey, data);\n  const result = await fetch('http://localhost:5000/update_note', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      'iv': encryptedMessage.iv,\n      'encryptedMessage': encryptedMessage.encryptedMessage\n    })\n  });\n  if (result.status === 200) {\n    return true;\n  }\n  return false;\n}\nexport async function requestGetNotes(nickName, sharedKey) {\n  let role = getTo().role;\n  const data = {\n    'nickName': nickName,\n    'role': role\n  };\n  const encryptedMessage = encryptMessage(sharedKey, data);\n  const result = await fetch('http://localhost:5000/get_user_notes', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      'iv': encryptedMessage.iv,\n      'encryptedMessage': encryptedMessage.encryptedMessage\n    })\n  });\n  const responseData = await result.json();\n  const decryptedData = decryptMessage(responseData.iv, responseData.encryptedMessage, sharedKey);\n  return decryptedData;\n}","map":{"version":3,"names":["decodeToken","encryptMessage","decryptMessage","requestUpdateNote","data","sharedKey","encryptedMessage","result","fetch","method","headers","body","JSON","stringify","iv","status","requestGetNotes","nickName","role","getTo","responseData","json","decryptedData"],"sources":["D:/учеба/3 курс/1 семестр/ИнфоБез/pracitce_3/practice_3_ui/src/requests/requestNotes.js"],"sourcesContent":["import { decodeToken } from \"../JWTProvider\"\r\nimport { encryptMessage, decryptMessage } from \"../cryptoTools\"\r\n\r\nexport async function requestUpdateNote(data, sharedKey) {\r\n\r\n    const encryptedMessage = encryptMessage(sharedKey, data)\r\n\r\n    const result = await fetch('http://localhost:5000/update_note', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            'iv': encryptedMessage.iv, \r\n            'encryptedMessage': encryptedMessage.encryptedMessage\r\n        }),\r\n    })\r\n\r\n    if (result.status === 200) {\r\n        return true\r\n    }\r\n    \r\n    return false\r\n}\r\n\r\nexport async function requestGetNotes(nickName, sharedKey) {\r\n    let role = getTo().role\r\n\r\n    const data = {'nickName': nickName, 'role': role}\r\n\r\n    const encryptedMessage = encryptMessage(sharedKey, data)\r\n\r\n    const result = await fetch('http://localhost:5000/get_user_notes', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            'iv': encryptedMessage.iv, \r\n            'encryptedMessage': encryptedMessage.encryptedMessage\r\n        }),\r\n    })\r\n\r\n    const responseData = await result.json();\r\n\r\n    const decryptedData = decryptMessage(responseData.iv, responseData.encryptedMessage, sharedKey)\r\n\r\n    return decryptedData\r\n}"],"mappings":"AAAA,SAASA,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,cAAc,EAAEC,cAAc,QAAQ,gBAAgB;AAE/D,OAAO,eAAeC,iBAAiBA,CAACC,IAAI,EAAEC,SAAS,EAAE;EAErD,MAAMC,gBAAgB,GAAGL,cAAc,CAACI,SAAS,EAAED,IAAI,CAAC;EAExD,MAAMG,MAAM,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;IAC5DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjB,IAAI,EAAEP,gBAAgB,CAACQ,EAAE;MACzB,kBAAkB,EAAER,gBAAgB,CAACA;IACzC,CAAC;EACL,CAAC,CAAC;EAEF,IAAIC,MAAM,CAACQ,MAAM,KAAK,GAAG,EAAE;IACvB,OAAO,IAAI;EACf;EAEA,OAAO,KAAK;AAChB;AAEA,OAAO,eAAeC,eAAeA,CAACC,QAAQ,EAAEZ,SAAS,EAAE;EACvD,IAAIa,IAAI,GAAGC,KAAK,CAAC,CAAC,CAACD,IAAI;EAEvB,MAAMd,IAAI,GAAG;IAAC,UAAU,EAAEa,QAAQ;IAAE,MAAM,EAAEC;EAAI,CAAC;EAEjD,MAAMZ,gBAAgB,GAAGL,cAAc,CAACI,SAAS,EAAED,IAAI,CAAC;EAExD,MAAMG,MAAM,GAAG,MAAMC,KAAK,CAAC,sCAAsC,EAAE;IAC/DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjB,IAAI,EAAEP,gBAAgB,CAACQ,EAAE;MACzB,kBAAkB,EAAER,gBAAgB,CAACA;IACzC,CAAC;EACL,CAAC,CAAC;EAEF,MAAMc,YAAY,GAAG,MAAMb,MAAM,CAACc,IAAI,CAAC,CAAC;EAExC,MAAMC,aAAa,GAAGpB,cAAc,CAACkB,YAAY,CAACN,EAAE,EAAEM,YAAY,CAACd,gBAAgB,EAAED,SAAS,CAAC;EAE/F,OAAOiB,aAAa;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}